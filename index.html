<html>
	<head>
	</head>
	<body>
	<div id="app">
	  {{ message }}
		<p id="server-time"></p>
		<label v-for="(value, index) in chatData" :key="index">{{value}}<br></label>
		<input type=""text v-model="chatessage"/>
		<button v-on:click="push()"/>push</button>
	</div>
	</body>
	<script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script>
      let HOST = location.origin.replace(/^http/, 'ws')
      let ws = new WebSocket(HOST);
	  var app = new Vue({
	    el: '#app',
	    data: {
		  message: 'Hello welcome chat!',
		  chatData: [],
		  chatessage: ''
	    },
		methods: {
			setRecived(){
			  ws.onmessage = (event) => {
				this.chatData.push(event.data);
			  };
			},
			push() {
				ws.send(this.chatessage);
			}
		},
		mounted() {
			this.setRecived();
			setInterval(() => {
				ws.send('ping');
			}, 30 * 1000)
		}
	  });
    </script>
</html>
